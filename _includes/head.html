<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <!-- JQuery (used for bootstrap and jekyll search) -->
    <script src="{{ site.baseurl }}/assets/js/jquery-3.2.1.min.js" ></script>
    
    <!-- Main JS (navbar.js and katex_init.js)-->
    <script defer=true src="{{ site.baseurl }}/assets/js/main.min.js"></script>
    
    <!-- CSS -->
    <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/main.css">

    <!--Favicon-->
    <link rel="shortcut icon" href="{{ site.baseurl }}/{{ site.theme_settings.favicon }}" type="image/x-icon">

    <!-- Canonical -->
    <link rel="canonical" href="{{ page.url | replace:'index.html','' | prepend: site.baseurl | prepend: site.url }}">

    <!-- RSS -->
    <link rel="alternate" type="application/atom+xml" title="{{ site.theme_settings.title }}" href="{{ site.url }}/{{ site.baseurl }}//feed.xml"/>

    <!-- Font Awesome -->
    <!-- <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"> -->
    <link rel="stylesheet" type="text/css" href="{{ site.baseurl }}/assets/css/font-awesome.min.css">

    <!-- Google Fonts -->
    {% if site.theme_settings.google_fonts %}
    <link href="//fonts.googleapis.com/css?family={{ site.theme_settings.google_fonts }}" rel="stylesheet" type="text/css"> 
    {% endif %}

    <!-- KaTeX 0.8.3 -->
    {% if site.theme_settings.katex %}
    <!--<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.8.3/katex.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.8.3/katex.min.js"></script> -->
    <link rel="stylesheet" type="text/css" href="{{ site.baseurl }}/assets/css/katex.min.css">
    <script src="{{ site.baseurl }}/assets/js/katex.min.js"></script>
    {% endif %}

    <!-- Google Analytics -->
    {% if site.theme_settings.google_analytics %}
    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', '{{ site.theme_settings.google_analytics }}', 'auto');
        ga('send', 'pageview');

    </script>    
    {% endif %}


    <!-- Google tag (gtag.js) -->
    {% if site.theme_settings.google_ga4_measurementId %}
    <script async src="https://www.googletagmanager.com/gtag/js?id={{ site.theme_settings.google_ga4_measurementId }}"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', '{{ site.theme_settings.google_ga4_measurementId }}');
    </script>
    {% endif %}

    <!--Mermaid 8.9.2-->
    {% if page.mermaid %}
    <script>
        function initMermaid() {
          var config = {
            startOnLoad: true,
            theme: "base",
            flowchart:{
              useMaxWidth: true,
              htmlLabels: true
            }
          };
          mermaid.initialize(config);
          window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid'));
        }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.9.2/mermaid.min.js"
        async="true"
        onload="initMermaid()">
    </script>
    {% endif %}
    
    <!-- seo tags -->
    {% seo title=false %}
    <!-- Manual seo tags -->
    <title>{% if page.title %}{{ page.title }}{% else %}{{ site.theme_settings.title }}{% endif %}</title>
    <meta name="description" content="{% if page.excerpt %}{{ page.excerpt | strip_html | strip_newlines | truncate: 160 }}{% else %}{{ site.theme_settings.description }}{% endif %}">
</head>
